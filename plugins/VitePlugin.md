- Rollup Rollup 插件的流程，Input -> rollup main -> Plugin1 -> Plugin2 -> more plugins -> emit file -> finish。Rollup 插件具备 hook 功能，对应到不同的运行节点，它会主动勾住在插件这块设置的内容，然后去调用它，得到它。Rollup 的通用配置有 include 和 exclude，三个官方插件是 alias、babel、replace。大部分中的 rollup 插件是可以直接在 vite 中使用的。Rollup 中的常用插件，Replace、Node resolve、eslint、image、strip、wasm、Commonjs、Babel、TypeScript。
- Vite Vite 插件是受限制的 rollup 插件，它的命名规范是 rollup-plugin-xxx，或者是 vite-plugin-xxx。Vite 兼容的钩子，服务启动时的 options 和 buildStart 钩子，只会调用一次。对应到每个模块，会兼容 resolveId、load 和 transform。服务器关闭时，会调用 buildEnd 和 closeBundle。同时，moduleParsed 不会被调用。Rollup 插件可以在 build 中配置，如果需要兼容 vite 插件，需要符合的条件

Vite 也有独有的钩子，config、configResolved、configureServer、transformIndexHtml、handleHotUpdate。在 vite 插件中的执行时机，pre、normal 和 post

name 插件名称 vite 和 rollup 共享 handleHotUpdate 执行自定义 HMR（模块热替换）更新处理 vite 独享 config 在解析 Vite 配置前调用。可以自定义配置，会与 vite 基础配置进行合并 vite 独享 configResolved 在解析 Vite 配置后调用。可以读取 vite 的配置，进行一些操作 vite 独享 configureServer 是用于配置开发服务器的钩子。最常见的用例是在内部 connect 应用程序中添加自定义中间件。 vite 独享 transformIndexHtml 转换 index.html 的专用钩子。 vite 独享 options 在收集 rollup 配置前，vite （本地）服务启动时调用，可以和 rollup 配置进行合并 vite 和 rollup 共享 buildStart 在 rollup 构建中，vite （本地）服务启动时调用，在这个函数中可以访问 rollup 的配置 vite 和 rollup 共享 resolveId 在解析模块时调用，可以返回一个特殊的 resolveId 来指定某个 import 语句加载特定的模块 vite 和 rollup 共享 load 在解析模块时调用，可以返回代码块来指定某个 import 语句加载特定的模块 vite 和 rollup 共享 transform 在解析模块时调用，将源代码进行转换，输出转换后的结果，类似于 webpack 的 loader vite 和 rollup 共享 buildEnd 在 vite 本地服务关闭前，rollup 输出文件到目录前调用 vite 和 rollup 共享 closeBundle 在 vite 本地服务关闭前，rollup 输出文件到目录前调用 vite 和 rollup 共享
